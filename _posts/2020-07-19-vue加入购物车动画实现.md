---
layout: post
---

## 实现原理
**小球数组 balls = [{show: false},{show: false},{show: false},{show: false}]    
下落的小球数组 dropBalls = []** 
1. 小球只有飞入动画，没有离开时的飞回动画；因此，它是单向的`enter`动画，没有leave动画。
2. 小球默认样式，设置为小球最终落地点的位置。 
3. 小球外层元素向下运动（缓动动画使用贝塞尔曲线 `cubic-bezier(0.49, -0.29, 0.75, 0.41)`），内层元素向左运动（缓动动画使用css3 transition属性内置的`linear`）。最终看到的效果，就是一个曲线运动。
4. 使用数组定义一组小球，连续执行动画时，从这里获取未执行动画的小球，每获取一个，则存入正在下落的小球数组里。
5. 使用vue transition组件自定义钩子函数实现动画效果；    
  5.1. `before-enter`；定义动画开始前，计算出小球的初始位置；并显示当前的小球，触发transition组件的动画机制；
  5.2. `enter`；重置小球的初始位置；监听过渡动画的结束事件，执行enter钩子函数的done回调，表示动画执行完成；
  5.3. `after-enter`；从下落中的小球数组中移除当前执行完动画的小球，并设置它的show为false（由于每个小球是一个引用对象，当前执行完动画的小球属性的更改也会在小球数组中表现出来）